var vuvuzela;
if (!process.env.LITE_MODE) {
  vuvuzela = require('vuvuzela');
}

function safeJsonParse(str) {
  if (process.env.LITE_MODE) {
    return JSON.parse(str);
  } else {
    // This try/catch guards against stack overflow errors.
    // JSON.parse() is faster than vuvuzela.parse() but vuvuzela
    // cannot overflow.
    try {
      return JSON.parse(str);
    } catch (e) {
      /* istanbul ignore next */
      return vuvuzela.parse(str);
    }
  }
}

export default safeJsonParse;
